"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validatePhoneNumber = exports.formatPhoneNumber = void 0;
const google_libphonenumber_1 = require("google-libphonenumber");
const PhoneUtil = google_libphonenumber_1.PhoneNumberUtil.getInstance();
const formatPhoneNumber = (phoneNumber) => {
    const cleaned = phoneNumber.startsWith("00") ? phoneNumber.replace("00", "+") : phoneNumber;
    const formatted = PhoneUtil.parseAndKeepRawInput(cleaned);
    return PhoneUtil.format(formatted, google_libphonenumber_1.PhoneNumberFormat.E164);
};
exports.formatPhoneNumber = formatPhoneNumber;
/**
 * would throw an error if the provided number is invalid
 * @param phoneNumber a valid mobile number
 */
const validatePhoneNumber = (phoneNumber, strict) => {
    const formatted = exports.formatPhoneNumber(phoneNumber);
    if (strict) {
        return PhoneUtil.isValidNumber(PhoneUtil.parseAndKeepRawInput(formatted));
    }
    return PhoneUtil.isPossibleNumber(PhoneUtil.parseAndKeepRawInput(formatted));
};
exports.validatePhoneNumber = validatePhoneNumber;
